var lenAnswer = new Array(0,0);for( var i=1; i<=40; i++ ){if( exANS[1][i] >= exANS[1][i+1] ){lenAnswer[0] = i;break;}}if( exANS[0][1] == 0 && exANS[0][2] == 0 ){lenAnswer[1] = 0;}else{for( i=1; i<=40; i++ ){if( exANS[0][i] >= exANS[0][i+1] ){ lenAnswer[1] = i; break; }}}$(document).ready(init);function init(){var data = { ACT:'LOAD', PN:'3279' };$.ajax( { type: "GET", url: "rhythmn_cn_scene05_files/cookieLoad.php", data: data } ).done( function(html){ paramHistory = html; setHistory(); } );$("#MARK,#selectButton,#setButton,#nextButton,#retryButton,#backButton,#scoreboard,#SIGN_L,#SIGN_C,#SIGN_R,#btn_block,#loading,#graph_field1").hide();$(document).on('keydown', function(e){ if(e.keyCode === 32){return false;} });if(exMODE == 2) { $("#r_img").css("top", "15px"); }if(8 <= exLEVEL){ $("#r_img").css("left","30px"); }$("#r_img").attr("src","https://senzoku-online.jp/solfege/rhythmn/images/rhythmn_"+ exMODE + "-" + ( exLEVEL<10 ? "0"+exLEVEL:exLEVEL ) + "_" + ( exNUM<10 ? "0"+exNUM:exNUM ) + ".png");tempo = exDefaultTempo[exNUM];$("#tempo" + tempo).css("color","#6ff");switch(tempo){case 32:move = 0;break;case 40:move = 1;break;case 48:move = 2;break;case 60:move = 3;LowTempo = 1;break;case 78:move = 4;LowTempo = 2;break;case 90:move = 5;LowTempo = 3;break;case 108:move = 6;LowTempo = 4;break;case 120:move = 7;LowTempo = 5;break;case 132:move = 8;LowTempo = 6;break;case 150:move = 9;LowTempo = 7;break;default:break;}switch(LowTempo){case 1:$("#tempo32").css({"color":"#808080","cursor":"default"});break;case 2:$("#tempo32,#tempo40").css({"color":"#808080","cursor":"default"});break;case 3:$("#tempo32,#tempo40,#tempo48").css({"color":"#808080","cursor":"default"});break;case 4:$("#tempo32,#tempo40,#tempo48,#tempo60").css({"color":"#808080","cursor":"default"});break;case 5:$("#tempo32,#tempo40,#tempo48,#tempo60,#tempo78").css({"color":"#808080","cursor":"default"});break;case 6:$("#tempo32,#tempo40,#tempo48,#tempo60,#tempo78,#tempo90").css({"color":"#808080","cursor":"default"});break;case 7:$("#tempo32,#tempo40,#tempo48,#tempo60,#tempo78,#tempo90,#tempo108").css({"color":"#808080","cursor":"default"});break;default:break;}if(exANS[1][0]==6 || exANS[1][0]==9 || exANS[1][0]==12){ $('[name="check1"]').prop("checked",true); }graphWrite();AcceptableRange = 100;}function setHistory(){for( var i=0; i<560; i++ ){scoreHistory[i] = parseInt(paramHistory.substr(i*2,2),16);}}function back(url){var f = document.forms["form1"];f.method = "POST";f.action = url;f.submit();return true;}function rangeChange(){if(NowP == 0 && finish == 0){if(range == 0){ $("#range_btn").css("background-image","url(images/scene05_middle.png)");range++; }else if(range == 1){ $("#range_btn").css("background-image","url(images/scene05_wide.png)");range++; }else if(range == 2){ $("#range_btn").css("background-image","url(images/scene05_normal.png)");range=0; }}switch( range ){case 0:AcceptableRange = 100;break;case 1:AcceptableRange = 125;break;case 2:AcceptableRange = 150;break;}}function graphWrite(){switch(parseInt(exANS[1][0])){case 2: case 6:$("#graph_field2").append('<img src="images/graphBar_2.png" style="position:absolute; top:10px; left: 500px;" />');break;case 3: case 9:$("#graph_field2").append('<img src="images/graphBar_3.png" style="position:absolute; top:10px; left: 500px;" />');break;case 4: case 12:$("#graph_field2").append('<img src="images/graphBar_4.png" style="position:absolute; top:10px; left: 500px;" />');break;case 5:$("#graph_field2").append('<img src="images/graphBar_5.png" style="position:absolute; top:10px; left: 500px;" />');break;case 7:$("#graph_field2").append('<img src="images/graphBar_7.png" style="position:absolute; top:10px; left: 500px;" />');break;default:break;}var defPos = 490;if(exMODE == 1){for( var i=1; i<=lenAnswer[0]; i++ ){var pos = defPos + ( parseInt(exANS[1][i]) * 0.1 );var val1 = '<img src="images/graph_ballR.png" style="position:absolute; top:38px; left:' + String(pos) + 'px;" id="BR' + String(i) + '" />';$("#graph_field2").append(val1);}}if(exMODE == 2){for( var i=1; i<=lenAnswer[0]; i++ ){var pos = defPos + ( parseInt(exANS[1][i]) * 0.1 );var val1 = '<img src="images/graph_ballR.png" style="position:absolute; top:10px; left:' + String(pos) + 'px;" id="BR' + String(i) + '" />';$("#graph_field2").append(val1);}for( var i=1; i<=lenAnswer[1]; i++ ){var pos = defPos + ( parseInt(exANS[0][i]) * 0.1 );var val1 = '<img src="images/graph_ballR.png" style="position:absolute; top:40px; left:' + String(pos) + 'px;" id="BL' + String(i) + '" />';$("#graph_field2").append(val1);}}$("#graph_field1").append('<img src="images/graph_point.png" style="position:absolute; top:67px; left: 493px;" />');}function graphChange(){if(NowP == 0 && finish == 0){if(graph == 0){$("#graph_btn").css("background-image","url(images/scene05_on.png)");$("#graph_field1").show();graph++;}else{$("#graph_btn").css("background-image","url(images/scene05_off.png)");$("#graph_field1").hide();graph = 0;}}}function tempoChoice(a){if(NowP == 0 && finish == 0){if(LowTempo <= a){$("#tempo" + tempo).css("color","#fff");$("#tempo" + speed1[a]).css("color","#6ff");tempo = speed1[a];move  = a;}}}function tempoChange(b){if(NowP == 0 & finish == 0){if(0<=move && move<=9){$("#tempo" + tempo).css("color","#fff");if(b == 1 && move != 0){if(move != LowTempo){ move--; }}else if(b == 2 && move != 9){ move++; }tempo = speed1[move];$("#tempo" + tempo).css("color","#6ff");}}}function backgroundChange(){if(NowP == 0 & finish == 0){bg++;switch(bg){case 1:$("#graph_field1").css("background-image","url(images/graph_white.png)");for( var i=1; i<=lenAnswer[0]; i++ ){$("#BR"+ i).attr("src","images/graph_ballR.png");if(exMODE == 2){ $("#BL"+ i).attr("src","images/graph_ballR.png"); }}break;case 2:$("#graph_field1").css("background-image","url(images/graph_blue.png)");for( var i=1; i<=lenAnswer[0]; i++ ){$("#BR"+ i).attr("src","images/graph_ballB.png");if(exMODE == 2){ $("#BL"+ i).attr("src","images/graph_ballB.png"); }}break;case 3:$("#graph_field1").css("background-image","url(images/graph_red.png)");for( var i=1; i<=lenAnswer[0]; i++ ){$("#BR"+ i).attr("src","images/graph_ballW.png");if(exMODE == 2){ $("#BL"+ i).attr("src","images/graph_ballW.png"); }}break;case 4:$("#graph_field1").css("background-image","url(images/graph_man.png)");for( var i=1; i<=lenAnswer[0]; i++ ){$("#BR"+ i).attr("src","images/graph_ballW.png");if(exMODE == 2){ $("#BL"+ i).attr("src","images/graph_ballW.png"); }}break;case 5:$("#graph_field1").css("background-image","url(images/graph_rhythmn.png)");for( var i=1; i<=lenAnswer[0]; i++ ){$("#BR"+ i).attr("src","images/graph_ballR.png");if(exMODE == 2){ $("#BL"+ i).attr("src","images/graph_ballR.png"); }}break;case 6:$("#graph_field1").css("background-image","url(images/graph1.png)");for( var i=1; i<=lenAnswer[0]; i++ ){$("#BR"+ i).attr("src","images/graph_ballW.png");if(exMODE == 2){ $("#BL"+ i).attr("src","images/graph_ballW.png"); }}bg = 0;break;default:break;}}}function gameStart(){NowP = 1;$("#SIGN_L,#SIGN_C,#SIGN_R,#backButton").show();bTYPE = $('[name="check1"]').prop("checked");$("#startButton,#haku_img").hide();$("#start_ms").text("判定　開始可能");$("#start_ms").css("color","#00f");var countS = "";if(bTYPE==true){ countS="3"; }soundC     = new Audio();soundC.src = "sound/count" + countS + "_" + ( tempo<=90 ? "0"+ tempo:tempo ) + ".mp3";soundC.play();timeup = setTimeout("Qstop()",90000);}function Qstop(){alert("TimeUp!!");clearTimeout(Qtimer);nonQ = true;SEND();}function setBack(){NowP = 0;new Audio("solfege/rhythmn_js/SE/back01.mp3").play();$("#SIGN_L,#SIGN_C,#SIGN_R,#backButton").hide();$("#startButton,#haku_img").show();$("#start_ms").text("");$("#start_ms").css("color","#00f");soundC.pause();soundC.currentTime = 0;clearTimeout(timeup);}document.onkeydown = function(e){dn = e.keyCode;switch(NowP){case 0:if( dn==32 && finish==0 ) { gameStart(); }break;case 1:switch(dn){case 32:if( onKEY[4] == 0 ){ onKEY[4] = 1; RightHand(); }break;case 77:if( onKEY[5] == 0 ){ onKEY[5] = 1; RightHand(); }break;case 188:if( onKEY[6] == 0 ){ onKEY[6] = 1; RightHand(); }break;case 190:if( onKEY[7] == 0 ){ onKEY[7] = 1; RightHand(); }break;case 191:if( onKEY[8] == 0 ){ onKEY[8] = 1; RightHand(); }break;case 90:if( onKEY[0] == 0 ){ onKEY[0] = 1; LeftHand(); }break;case 88:if( onKEY[1] == 0 ){ onKEY[1] = 1; LeftHand(); }break;case 86:if( onKEY[2] == 0 ){ onKEY[2] = 1; LeftHand(); }break;case 67:if( onKEY[3] == 0 ){ onKEY[3] = 1; LeftHand(); }break;case 66:if(NowP == 1 && (countL+countR) == 0) { setBack(); }break;default:break;}}if(finish == 1){if(dn == 83 && NowP == 0){ setting(); }if(dn == 82 && NowP == 0){ gameRetry(); }if(dn == 78 && 90 <= get && NowP == 0){ nextQuestion(); }if(dn == 69 && NowP == 0){ back('./scene03_0' + exMODE + '.php'); }}if( exMODE == 1 ){if( onKEY[4]+onKEY[5]+onKEY[6]+onKEY[7]+onKEY[8] != 0 ){$("#SIGN_C").css("visibility","visible");}}else{if( onKEY[4]+onKEY[5]+onKEY[6]+onKEY[7]+onKEY[8] != 0 ){$("#SIGN_R").css("visibility","visible");}if( onKEY[0]+onKEY[1]+onKEY[2]+onKEY[3]          != 0 ){$("#SIGN_L").css("visibility","visible");}}};document.onkeyup = function(g){var u = g.keyCode;switch(u){case 32:if( onKEY[4] == 1 ){ onKEY[4] = 0; }break;case 77:if( onKEY[5] == 1 ){ onKEY[5] = 0; }break;case 188:if( onKEY[6] == 1 ){ onKEY[6] = 0; }break;case 190:if( onKEY[7] == 1 ){ onKEY[7] = 0; }break;case 191:if( onKEY[8] == 1 ){ onKEY[8] = 0; }break;case 90:if( onKEY[0] == 1 ){ onKEY[0] = 0; }break;case 88:if( onKEY[1] == 1 ){ onKEY[1] = 0; }break;case 86:if( onKEY[2] == 1 ){ onKEY[2] = 0; }break;case 67:if( onKEY[3] == 1 ){ onKEY[3] = 0; }break;default:break;}if( exMODE == 1 ){if( onKEY[4]+onKEY[5]+onKEY[6]+onKEY[7]+onKEY[8] == 0 ){$("#SIGN_C").css("visibility","hidden");}}else{if( onKEY[4]+onKEY[5]+onKEY[6]+onKEY[7]+onKEY[8] == 0 ){$("#SIGN_R").css("visibility","hidden");}if( onKEY[0]+onKEY[1]+onKEY[2]+onKEY[3]          == 0 ){$("#SIGN_L").css("visibility","hidden");}}};function RightHand(){if(NowP == 1){ hit();time2 = new Date().getTime();countR++;posR[countR] = (time2-time1);ballChange(0);}}function LeftHand(){if(exMODE == 2){if(NowP == 1){hit();time2  = new Date().getTime();countL++;posL[countL]=(time2-time1);ballChange(1);}}}function ballChange(LR){if(graph == 1){switch(LR){case 0:for( var i=1; i<=lenAnswer[0]; i++ ){var tmpI = Math.floor( Math.abs( exANS[1][i] - ( posR[countR] * exTempoRatio ) ) );if( tmpI <= AcceptableRange && $("#BR"+i).css('opacity')==1 ){$("#BR"+i).fadeOut(150);BallHit += 1;break;}else{}}break;case 1:for( var i=1; i<=lenAnswer[1]; i++ ){var tmpI = Math.abs( exANS[0][i] - ( posL[countL] * exTempoRatio ) );if( tmpI <= AcceptableRange ){$("#BL"+i).fadeOut(150);BallHit += 1;break;}}break;}}}function hit(){if((countL+countR) == 0){exTempoRatio =  tempo / 60;$("#backButton").hide();switch(exANS[1][0]){case 2:case 6:switch(tempo){case 32:Qtimer = setTimeout("SEND()",14800);break;case 40:Qtimer = setTimeout("SEND()",11800);break;case 48:Qtimer = setTimeout("SEND()",9800);break;case 60:Qtimer = setTimeout("SEND()",8000);break;case 78:Qtimer = setTimeout("SEND()",6100);break;case 90:Qtimer = setTimeout("SEND()",5200);break;case 108:Qtimer = setTimeout("SEND()",4100);break;case 120:Qtimer = setTimeout("SEND()",3800);break;case 132:Qtimer = setTimeout("SEND()",3532);break;case 150:Qtimer = setTimeout("SEND()",3100);break;default:break;}break;case 3:case 9:switch(tempo){case 32:Qtimer = setTimeout("SEND()",22000);break;case 40:Qtimer = setTimeout("SEND()",17700);break;case 48:Qtimer = setTimeout("SEND()",14800);break;case 60:Qtimer = setTimeout("SEND()",12000);break;case 78:Qtimer = setTimeout("SEND()",9200);break;case 90:Qtimer = setTimeout("SEND()",8000);break;case 108:Qtimer = setTimeout("SEND()",6400);break;case 120:Qtimer = setTimeout("SEND()",5700);break;case 132:Qtimer = setTimeout("SEND()",5300);break;case 150:Qtimer = setTimeout("SEND()",4900);break;default:break;}break;case 4:case 12:switch(tempo){case 32:Qtimer = setTimeout("SEND()",29700);break;case 40:Qtimer = setTimeout("SEND()",23800);break;case 48:Qtimer = setTimeout("SEND()",19800);break;case 60:Qtimer = setTimeout("SEND()",16000);break;case 78:Qtimer = setTimeout("SEND()",12300);break;case 90:Qtimer = setTimeout("SEND()",10700);break;case 108:Qtimer = setTimeout("SEND()",8600);break;case 120:Qtimer = setTimeout("SEND()",7700);break;case 132:Qtimer = setTimeout("SEND()",7164);break;case 150:Qtimer = setTimeout("SEND()",6300);break;default:break;}break;case 5:switch(tempo){case 32:Qtimer = setTimeout("SEND()",37000);break;case 40:Qtimer = setTimeout("SEND()",29500);break;case 48:Qtimer = setTimeout("SEND()",25000);break;case 60:Qtimer = setTimeout("SEND()",19800);break;case 78:Qtimer = setTimeout("SEND()",15200);break;case 90:Qtimer = setTimeout("SEND()",13000);break;case 108:Qtimer = setTimeout("SEND()",10800);break;case 120:Qtimer = setTimeout("SEND()",9700);break;case 132:Qtimer = setTimeout("SEND()",8900);break;case 150:Qtimer = setTimeout("SEND()",7900);break;default:break;}break;case 7:switch(tempo){case 32:Qtimer = setTimeout("SEND()",52000);break;case 40:Qtimer = setTimeout("SEND()",42000);break;case 48:Qtimer = setTimeout("SEND()",35000);break;case 60:Qtimer = setTimeout("SEND()",28000);break;case 78:Qtimer = setTimeout("SEND()",21500);break;case 90:Qtimer = setTimeout("SEND()",18500);break;case 108:Qtimer = setTimeout("SEND()",15200);break;case 120:Qtimer = setTimeout("SEND()",13700);break;case 132:Qtimer = setTimeout("SEND()",12500);break;case 150:Qtimer = setTimeout("SEND()",11000);break;default:break;}break;default:break;}$("#start_ms").text("判定中！");$("#start_ms").css("color","#f00");var val1 = parseFloat(60/parseFloat(tempo));switch(parseInt(exANS[1][0])){case 2:case 6:$("#graph_field2").animate({left: '-800px'},  8000*val1, 'linear');break;case 3:case 9:$("#graph_field2").animate({left:'-1200px'}, 12000*val1, 'linear');break;case 4:case 12:$("#graph_field2").animate({left:'-1600px'}, 16000*val1, 'linear');break;case 5:$("#graph_field2").animate({left:'-2000px'}, 20000*val1, 'linear'); break;case 7:$("#graph_field2").animate({left:'-2800px'}, 28000*val1, 'linear'); break;}time1 = new Date().getTime();}else if( countL >= 100 || countR >= 100 ){alert("叩きすぎです！");clearTimeout(Qtimer);SEND();}}function SEND(){soundC.pause();soundC.currentTime = 0;clearTimeout(timeup);finish = 1;$("#graph_field1,#graph_ball").hide();$("#loading").show();$("#start_ms").text("");$("#SIGN_L,#SIGN_C,#SIGN_R,#startButton,#backButton").hide();var DT = {PN:"3279",exMODE:exMODE,exLEVEL:exLEVEL,exNUM:exNUM,countR:countR,countL:countL,range:range,graph:graph,tempo:tempo,R00:posR[00],R01:posR[01],R02:posR[02],R03:posR[03],R04:posR[04],R05:posR[05],R06:posR[06],R07:posR[07],R08:posR[08],R09:posR[09],R10:posR[10],R11:posR[11],R12:posR[12],R13:posR[13],R14:posR[14],R15:posR[15],R16:posR[16],R17:posR[17],R18:posR[18],R19:posR[19],R20:posR[20],R21:posR[21],R22:posR[22],R23:posR[23],R24:posR[24],R25:posR[25],R26:posR[26],R27:posR[27],R28:posR[28],R29:posR[29],R30:posR[30],R31:posR[31],R32:posR[32],R33:posR[33],R34:posR[34],R35:posR[35],R36:posR[36],R37:posR[37],R38:posR[38],R39:posR[39],R40:posR[40],R41:posR[41],R42:posR[42],R43:posR[43],R44:posR[44],R45:posR[45],R46:posR[46],R47:posR[47],R48:posR[48],R49:posR[49],R50:posR[50],R51:posR[51],R52:posR[52],R53:posR[53],R54:posR[54],R55:posR[55],R56:posR[56],R57:posR[57],R58:posR[58],R59:posR[59],R60:posR[60],R61:posR[61],R62:posR[62],R63:posR[63],R64:posR[64],R65:posR[65],R66:posR[66],R67:posR[67],R68:posR[68],R69:posR[69],R70:posR[70],R71:posR[71],R72:posR[72],R73:posR[73],R74:posR[74],R75:posR[75],R76:posR[76],R77:posR[77],R78:posR[78],R79:posR[79],R80:posR[80],R81:posR[81],R82:posR[82],R83:posR[83],R84:posR[84],R85:posR[85],R86:posR[86],R87:posR[87],R88:posR[88],R89:posR[89],R90:posR[90],R91:posR[91],R92:posR[92],R93:posR[93],R94:posR[94],R95:posR[95],R96:posR[96],R97:posR[97],R98:posR[98],R99:posR[99],L00:posL[00],L01:posL[01],L02:posL[02],L03:posL[03],L04:posL[04],L05:posL[05],L06:posL[06],L07:posL[07],L08:posL[08],L09:posL[09],L10:posL[10],L11:posL[11],L12:posL[12],L13:posL[13],L14:posL[14],L15:posL[15],L16:posL[16],L17:posL[17],L18:posL[18],L19:posL[19],L20:posL[20],L21:posL[21],L22:posL[22],L23:posL[23],L24:posL[24],L25:posL[25],L26:posL[26],L27:posL[27],L28:posL[28],L29:posL[29],L30:posL[30],L31:posL[31],L32:posL[32],L33:posL[33],L34:posL[34],L35:posL[35],L36:posL[36],L37:posL[37],L38:posL[38],L39:posL[39],L40:posL[40],L41:posL[41],L42:posL[42],L43:posL[43],L44:posL[44],L45:posL[45],L46:posL[46],L47:posL[47],L48:posL[48],L49:posL[49],L50:posL[50],L51:posL[51],L52:posL[52],L53:posL[53],L54:posL[54],L55:posL[55],L56:posL[56],L57:posL[57],L58:posL[58],L59:posL[59],L60:posL[60],L61:posL[61],L62:posL[62],L63:posL[63],L64:posL[64],L65:posL[65],L66:posL[66],L67:posL[67],L68:posL[68],L69:posL[69],L70:posL[70],L71:posL[71],L72:posL[72],L73:posL[73],L74:posL[74],L75:posL[75],L76:posL[76],L77:posL[77],L78:posL[78],L79:posL[79],L80:posL[80],L81:posL[81],L82:posL[82],L83:posL[83],L84:posL[84],L85:posL[85],L86:posL[86],L87:posL[87],L88:posL[88],L89:posL[89],L90:posL[90],L91:posL[91],L92:posL[92],L93:posL[93],L94:posL[94],L95:posL[95],L96:posL[96],L97:posL[97],L98:posL[98],L99:posL[99],ip1:ip1,ip2:ip2,brw:brw,nickname:$('#nickname').val()};$.ajax({type:"POST",url:"getMarking.php",data:DT}).done( function(html){html = html.replace(/<PG1/g,   '<img src="img/PG.png" style="left:');html = html.replace(/PG1\/>/g, 'px;" class="PA1" />' );html = html.replace(/<PB1/g,   '<img src="img/PB.png" style="left:');html = html.replace(/PB1\/>/g, 'px;" class="PU1" />' );html = html.replace(/<PR1/g,   '<img src="img/PR.png" style="left:');html = html.replace(/PR1\/>/g, 'px;" class="PU1" />' );html = html.replace(/<PG2/g,   '<img src="img/PG.png" style="left:');html = html.replace(/PG2\/>/g, 'px;" class="PA2" />' );html = html.replace(/<PB2/g,   '<img src="img/PB.png" style="left:');html = html.replace(/PB2\/>/g, 'px;" class="PU2" />' );html = html.replace(/<PR2/g,   '<img src="img/PR.png" style="left:');html = html.replace(/PR2\/>/g, 'px;" class="PU2" />' );html = html.replace(/<PG3/g,   '<img src="img/PG.png" style="left:');html = html.replace(/PG3\/>/g, 'px;" class="PA3" />' );html = html.replace(/<PB3/g,   '<img src="img/PB.png" style="left:');html = html.replace(/PB3\/>/g, 'px;" class="PU3" />' );html = html.replace(/<PR3/g,   '<img src="img/PR.png" style="left:');html = html.replace(/PR3\/>/g, 'px;" class="PU3" />' );$("#view_marking").css("visibility","visible");$("#view_marking").html(html);$("#loading").hide();questionEnd();});}function questionEnd(){NowP = 0;nonQ = false;var imgNUM = 0;clearTimeout(Qtimer);if(nonQ == false){ get = $("#totalScore").val(); }$("#score_NUM").text(get);switch(exANS[1][0]){case 2:case 6:imgNUM = 2;break;case 3:case 9:imgNUM = 3;break;case 4:case 12:imgNUM = 4;break;case 5:case 7:imgNUM = 5;break;default:break;}$("#start_ms").text("");$("#view_marking").css("visibility","visible");$("#btn_block,#retryButton,#setButton,#selectButton,#scoreboard").show();$("#SIGN_L,#SIGN_C,#SIGN_R").hide();$("#SIGN_L,#SIGN_C,#SIGN_R").css("visibility","hidden");if(90 <= get){ $("#nextButton").show(); new Audio("SE/correct.mp3").play(); }if(70 <= get && get <= 89){ new Audio("SE/miss01.mp3").play(); }if(50 <= get && get <= 69){ new Audio("SE/miss02.mp3").play(); }if(get < 50){ new Audio("SE/miss03.mp3").play(); }if(graph == 0 && range == 0){var posA = (exMODE-1)*280 + (exLEVEL-1)*20 + (exNUM-1);if( parseInt(get) > 100 ){console.log("ERROR CODE:08");get = 100;}if( scoreHistory[posA] > 100 ){console.log("ERROR CODE:09");scoreHistory[posA] = 0;}if( scoreHistory[posA] < parseInt(get) ){scoreHistory[posA] = parseInt(get);var data = { ACT:'CHANGE', PN:'3279', exMODE:exMODE, exLEVEL:exLEVEL, exNUM:exNUM, score:get };$.ajax( { type: "POST", url: "cookieSave.php", data: data } ).done( function(html){ console.log(html); setHistory(); } );}}}function gameRetry(){NowP    = 1;finish  = 0;countL  = 0;countR  = 0;BallHit = 0;get     = 0;$("#score_NUM").text("");$("#view_marking,#LR_value,#SIGN_L,#SIGN_C,#SIGN_R").css("visibility","hidden");$("#view_marking").html('<img src="images/gif-load.gif" id="loading"/>');$("#retryButton,#setButton,#nextButton,#selectButton,#scoreboard,#btn_block").hide();$("#SIGN_L,#SIGN_C,#SIGN_R,#backButton").show();bTYPE = $('[name="check1"]').prop("checked");$("#start_ms").text("判定　開始可能");$("#start_ms").css("color","#00f");if(graph == 1){ $("#graph_field1,#graph_ball").show(); }$("#graph_field2").css("left","0px");var defPos = 490;if(exMODE == 1){for( var i=1; i<=lenAnswer[0]; i++ ){ $("#BR"+String(i)).fadeIn(); }}if(exMODE == 2){for( var i=1; i<=lenAnswer[0]; i++ ){ $("#BR"+String(i)).fadeIn(); }for( var i=1; i<=lenAnswer[1]; i++ ){ $("#BL"+String(i)).fadeIn(); }}var countS = "";if(bTYPE==true){ countS="3"; }soundC.src = "sound/count" + countS + "_" + ( tempo<=90 ? "0"+ tempo:tempo ) + ".mp3";soundC.play();timeup = setTimeout("Qstop()",90000);}function setting(){finish  = 0;countL  = 0;countR  = 0;get     = 0;BallHit = 0;$("#score_NUM").text("");$("#view_marking,#LR_value,#SIGN_L,#SIGN_C,#SIGN_R").css("visibility","hidden");$("#view_marking").html('<img src="images/gif-load.gif" id="loading"/>');$("#retryButton,#setButton,#nextButton,#selectButton,#scoreboard,#btn_block").hide();$("#startButton").show();if(graph == 1){ $("#graph_field1,#graph_ball").show(); }$("#graph_field2").css("left","0px");var defPos = 490;if(exMODE == 1){for( var i=1; i<=lenAnswer[0]; i++ ){ $("#BR"+String(i)).fadeIn(); }}if(exMODE == 2){for( var i=1; i<=lenAnswer[0]; i++ ){ $("#BR"+String(i)).fadeIn(); }for( var i=1; i<=lenAnswer[1]; i++ ){ $("#BL"+String(i)).fadeIn(); }}}function nextQuestion(){if(exNUM == 20){$("#level").attr("value",parseInt($("#level").val())+1);$("#num").attr("value",parseInt($("#num").val())-19);$.cookie("userLevel",$("#level").val());}else{$("#num").attr("value",parseInt($("#num").val())+1);}var f    = document.forms["form1"];f.method = "POST";f.action = "./scene05.php";f.submit();return true;}